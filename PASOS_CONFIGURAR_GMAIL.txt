╔════════════════════════════════════════════════════════════════╗
║                                                                ║
║         CÓMO CONFIGURAR GMAIL PARA EMAILS REALES              ║
║                                                                ║
╚════════════════════════════════════════════════════════════════╝

📧 PASO 1: GENERAR CONTRASEÑA DE APLICACIÓN DE GOOGLE
════════════════════════════════════════════════════════════════

1. Ve a: https://myaccount.google.com/

2. En el menú izquierdo, haz clic en "Seguridad"

3. Activa la "Verificación en 2 pasos" si no la tienes activada:
   - Busca "Verificación en 2 pasos"
   - Click en "Empezar"
   - Sigue las instrucciones

4. Una vez activada la verificación en 2 pasos, regresa a "Seguridad"

5. Busca "Contraseñas de aplicaciones" (al final de la sección)
   - Si no la ves, asegúrate de tener la verificación en 2 pasos activa

6. Click en "Contraseñas de aplicaciones"

7. Te pedirá tu contraseña de Google, ingrésala

8. En "Seleccionar app" → Elige "Correo"
   En "Seleccionar dispositivo" → Elige "Otro (nombre personalizado)"
   Escribe: "Django Reservas"

9. Click en "Generar"

10. Google te mostrará una contraseña de 16 caracteres como:
    xxxx xxxx xxxx xxxx
    
    ⚠️ COPIA ESTA CONTRASEÑA - La necesitarás en el siguiente paso
    ⚠️ NO compartas esta contraseña con nadie
    ⚠️ Quita los espacios: xxxxxxxxxxxxxxxx


════════════════════════════════════════════════════════════════
⚡ PASO 2: CONFIGURAR DJANGO
════════════════════════════════════════════════════════════════

Una vez tengas la contraseña de aplicación:

1. Abre el archivo: config/settings.py

2. Busca la sección de EMAIL_BACKEND

3. COMENTA esta línea (agrega # al inicio):
   # EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'

4. DESCOMENTA estas líneas (quita el # del inicio):
   EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
   EMAIL_HOST = 'smtp.gmail.com'
   EMAIL_PORT = 587
   EMAIL_USE_TLS = True
   EMAIL_HOST_USER = 'tu-email@gmail.com'
   EMAIL_HOST_PASSWORD = 'xxxxxxxxxxxxxxxxxxxx'
   DEFAULT_FROM_EMAIL = 'Sistema de Reservas <tu-email@gmail.com>'

5. REEMPLAZA:
   - 'tu-email@gmail.com' → Tu email real de Gmail
   - 'xxxxxxxxxxxxxxxxxxxx' → La contraseña de aplicación (16 caracteres SIN espacios)

6. GUARDA el archivo


════════════════════════════════════════════════════════════════
🧪 PASO 3: PROBAR
════════════════════════════════════════════════════════════════

1. Reinicia el servidor Django:
   python manage.py runserver

2. Ve a: http://127.0.0.1:8000/login/

3. Click en "¿Olvidaste tu contraseña?"

4. Ingresa un email REAL que esté registrado en tu sistema

5. ¡Revisa tu bandeja de entrada!
   - El email debería llegar en 1-2 minutos
   - Revisa también SPAM si no lo ves


════════════════════════════════════════════════════════════════
⚠️ SOLUCIÓN DE PROBLEMAS
════════════════════════════════════════════════════════════════

Problema: "SMTPAuthenticationError"
Solución: 
  - Verifica que la verificación en 2 pasos esté activa
  - Genera una nueva contraseña de aplicación
  - Asegúrate de quitar los espacios de la contraseña

Problema: No llega el email
Solución:
  - Revisa la carpeta de SPAM
  - Verifica que el email esté registrado en la base de datos
  - Espera 2-3 minutos

Problema: "SMTPServerDisconnected"
Solución:
  - Verifica tu conexión a internet
  - Asegúrate de usar EMAIL_PORT = 587
  - Verifica EMAIL_USE_TLS = True


════════════════════════════════════════════════════════════════
🔒 SEGURIDAD IMPORTANTE
════════════════════════════════════════════════════════════════

⚠️ NO SUBAS TU CONTRASEÑA A GIT

Para mayor seguridad, usa variables de entorno:

1. Instala python-decouple:
   pip install python-decouple

2. Crea archivo .env en la raíz:
   EMAIL_HOST_USER=tu-email@gmail.com
   EMAIL_HOST_PASSWORD=tu-contraseña-de-aplicación

3. En settings.py:
   from decouple import config
   
   EMAIL_HOST_USER = config('EMAIL_HOST_USER')
   EMAIL_HOST_PASSWORD = config('EMAIL_HOST_PASSWORD')

4. Agrega .env a .gitignore:
   echo .env >> .gitignore


════════════════════════════════════════════════════════════════
✅ LISTO
════════════════════════════════════════════════════════════════

Una vez configurado, tus usuarios recibirán emails reales para
recuperar sus contraseñas.

¡Éxito! 🚀
